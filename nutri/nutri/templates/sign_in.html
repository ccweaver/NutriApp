<html>
<head>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/bootstrap.min.css"/>
<!--<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/bootstrap-responsive.min.css"/> 
--> 

<script type="text/javascript" src="{{STATIC_URL}}js/bootstrap.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>


<script>

//  handles submitting the profile form
$(document).on("click","#nav_login_submit",function(event)
           {
           $.ajax(
           {
              type: "post",
              url: "",
              data: {login_email:document.getElementById('login_email').value, login_pass:document.getElementById('login_pass').value, csrfmiddlewaretoken:document.getElementsByName('csrfmiddlewaretoken')[0].value},
              success: function (data)
              {
                if (data.success == 'true') {
                  
                    location.reload();
                  
                }
                else {
                  document.getElementById('login_pass').value = "";

                  $("#search").effect("shake");
                  $("#SearchMessage").effect("shake");
                }
              return false;
              },
              error: function(data)
              {

              }
            });
           return false;
});

function filter(x, type){
  $.ajax(
   {
      type: "post",
      url: "",
      data: {type:type, term:x, csrfmiddlewaretoken:document.getElementsByName('csrfmiddlewaretoken')[0].value},
      success: function (data)
      {
     
        $("#top10Table").html(data);
        return false;
      },
      error: function(data)
      {

      }
    });
   return false;
}


function hideModal()
{
    $('#myModal').modal('hide');
}

function showModal()
{
    $('#myModal').modal('show');
};

window.onload = function() {
  validModal(document.getElementById('error'));
}

function validModal(invalid)
{
  if (invalid.innerHTML != "")
    showModal();
}

$(document).on("click","#logout",function(event)
           {
           $.ajax(
           {
              type: "post",
              url: "",
              data: {logout:'true', csrfmiddlewaretoken:document.getElementsByName('csrfmiddlewaretoken')[0].value},
              success: function (data)
              {;
                location.reload();
              return false;
              },
              error: function(data)
              {

              }
            });
           return false;
});

$(document).on("click","#proflink",function(event)
           {
           $.ajax(
           {
              type: "post",
              url: "",
              data: {proflink:'true', csrfmiddlewaretoken:document.getElementsByName('csrfmiddlewaretoken')[0].value},
              success: function (data)
              {
               location.href = data.href; 
              return false;

              },
              error: function(data)
              {

              }
            });
           return false;
});


</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62884207-1', 'auto');
  ga('send', 'pageview');

</script>



<style type="text/css">
       body {
           ##background-image:url('../static/orange_limes.jpg');
            background-size:cover;
        }
        
        #buttons {
            width: 30%;
            height:35px;
            margin-left:850px;
            margin-top: 25px;  
        }
        
        #login_list {
          margin-top: 10px;
        }

        input[type="text"],input[type="password"] {
            -webkit-border-radius: ;
            -moz-border-radius: ;
            border-radius: ;
            border-style: solid;
            height: 30px;
            display: inline;
        }

        #search{
          height: 50px;
          width: 80%;
          margin-left: 20px;
          margin-right: auto;
          margin-top: auto;
          margin-bottom: auto;
          vertical-align: middle;
          text-align:center
        }

        #search_bar {
          height: 50px;
          width: 90%;
          margin-left:0%;
          margin-top: 0px;
          text-align:center;
        }

        .fizzle {
          color:;
          font-size:25px;
        }
        .jumbotron {
          margin-left:20%;
          margin-right:20%;
          border-radius:25px;
        }
         #topnavbar{
            background-image:url('');
            background-size:cover;
        }
        .comby{
          margin-right:25%;
          background-color:white;
        }
        
        .contactme{
          margin-left:80%;
          font-weight:bold;
        }
        
        .money{
          margin-left:1%;
        }
        
        .giants {
          margin-left:20%;
          font-size: 23px
        }
        
        .berpo{
          -moz-border-radius: 15px;
          -webkit-border-radius: 15px;
        }
        
        .turf{
          font-size:20px;
          margin-top:1%;
        }
        
        .eli{
          margin-left:30%;
          margin-top:100%;
          font-size:50px;
        }
        
        .turble{
          margin-left:%;
          margin-top:10%;
        }
        
        .bertz {
          margin-left:35%;
          margin-top:5%;
        }
        
        .drake {
          text-align:center;
          font-size:30;
          margin-top:5%;
        }
        
        .or{
          text-align:center;
          font-size:30;
          margin-top:%;
        }
        
        .usernotice{
          margin-left:70%;
        }
        
        .sneak{
          margin-left:2%;
          font-size:30;
        }
        #cDropdown,
        #nDropdown {
          float:left;
          margin-top:0px;
          padding-top:0px; 
        }
        
        .cn{
          display:inline-block;
        }
        .left{
          display:inline-block;
          width:65%;
          margin-left:25%;
          margin-right:%;
        }
        
        .right{
          display:inline-block;
          margin-left:2%;
        }
       
</style>


    <title>CALOSPOT</title>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" id="topnavbar">
    <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><span style="color:#2efb00;">Calo</span><span style="color:#003CFF;">Spot</span></a>
        </div>
        
        <div class="navbar-collapse collapse">
          <div id="login_list" align='right'>
            {% if is_user %}
            <button id="proflink" type="button" class="btn btn-primary btn-sm">{{user}}</button>
            <button id="logout" type="button" class="btn btn-danger btn-sm">Logout</button>
            {% else %}
            <font color="white" size='3'> </font>
            <input name="login_email" type="text" id="login_email" placeholder="  Email">
            <input name="login_pass" type="password" id="login_pass" placeholder="  Password">
            <button id="nav_login_submit" class="btn btn-danger btn-sm" id="login_button" style="background-color:">Sign In</button>&nbsp;
            <button class="btn btn-danger btn-sm"; style="background-color:#0066ff; border:none;" onclick="showModal();">Create New Account</button>&nbsp;
            {% endif %} 
          </ul>
          </div>
        </div>
    </div>
</div>

<br><br><br><br>
  <div class="usernotice">
    //// Sign in to see the most popular dishes in your area ////
  </div>
<div class = "container">

 <div class ="drake">
  Spot a healthy meal. See every salad and wrap in your city, and their <span style="color:#2efb00;">nutrition</span> info.
  </div>
<div class="bertz">
 <a id="beantownbutt" class="btn btn-danger btn-lg" href="/Boston/neighborhoods" style="background-color:lightblue; border-color:white; color:;">Boston</a>&nbsp;
    <a id="cambridgeButton" class="btn btn-danger btn-lg" href="/Cambridge/neighborhoods" style="background-color:lightblue; border-color:white; color:;">Cambridge</a>&nbsp;
    <a id="StamfordButton" class="btn btn-danger btn-lg" href="/Stamford/neighborhoods" style="background-color:lightblue; border-color:white; color:;">Stamford</a>&nbsp;
</div>
<br><br>
<div class="or">
  or
</div>
<br><br>

<div id="money">
  <div align='left' id="SearchMessage">
    <div class="Giants"
    <font size="10" face="Calibri">
   
    
   </div>


    </font>
  </div>
<div>

              <div id="search">
              <form method="GET">
              <font size="5" face="Calibri">
              <div class="cnn">
              <div class="left">
              <input type="text" id="search_bar" name="search" placeholder="Enter Restaurant or Deli's Name" style="margin-left:%"> 
              </div
              <div class="right">
              <button type="submit">Search</button>
              </div>
              </div>
              
              <div class="turf" style="margin-left:29%;">
               
              </div>

              <div class="berpo">
             
              </div>
              </font>
              </form>
              
         

 
            
 
              </div>
<div class="turble">
  {% if top10 %}
  <div class="sneak">
  {Top Ten Dish List}
  </div>

<div class="dropdown" id="cDropdown">
  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Filter by City
  <span class="caret"></span></button>
  <ul class="dropdown-menu">
    {%for city in cities%}
    <li><a onclick="filter('{{city}}', 'city');">{{city}}</a></li>
    {% endfor %}
  </ul>
</div>
<div class="dropdown" id="nDropdown">
  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Filter by Neighborhood
  <span class="caret"></span></button>
  <ul class="dropdown-menu">
    {%for n in neighborhoods%}
    <li><a onclick="filter('{{n}}', 'n');">{{n}}</a></li>
    {% endfor %}
  </ul>
</div>

<br><br><br>
<div id="top10Table">{% include 'top10.html' %}</div>
</div>
{% endif %}

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">New Restaurant Account</h4>
      </div>
      
        <form id="newuserform" method="post" action="">
        {% csrf_token %}

        <div class="modal-body">
        <font size="3" color="A22;" style="bold;">  
        <div id='error'>{{error}}</div>
        </font>  
                
        <font size="1"><br><br></font>
        {{ form.email }}
        <font size="1"><br><br></font>
        {{ form.email2 }}
        <font size="1"><br><br></font>
        {{ form.password }}
        <font size="1"><br><br></font>
        Click here if you're a restaurant owner: {{ form.restaurant }}
        </font>
        </div>
        <div class="modal-footer">

            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <input class="btn btn-danger btn-sm" id="create_user_submit" type="submit" value="Submit" onClick="window.location.reload()">

        </form>
    </div>
  </div>
</div>



<script src="{{STATIC_URL}}/js/bootstrap.min.js"></script>

</body>
</html>


